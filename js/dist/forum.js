(()=>{var __webpack_modules__={456:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function safelyEvalAdScript(adPosition,script){try{eval(script)}catch(e){console.group("[mediaconstructor/ads] Failed to execute ad script"),console.info('An exception occurred while evaluating the ad script for location "'+adPosition+'".\n\nTo prevent your forum frontend breaking, we caught the error. Please be aware, however, that this may prevent your ads functioning in some cases.'),console.info("The stacktrace will be logged below to help you identify the issue. This may reference the ads extension, but the likelihood that the issue lies in there is extraordinarily miniscule."),console.error(e),console.groupEnd()}}__webpack_require__.d(__webpack_exports__,{Z:()=>safelyEvalAdScript})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__);const e=flarum.core.compat["forum/app"];var t=__webpack_require__.n(e);const o=flarum.core.compat["common/extend"];function r(){var e=0;try{e++,(adsbygoogle=window.adsbygoogle||[]).push({})}catch(t){e<10&&setTimeout(r,1e3)}}const a=flarum.core.compat["forum/components/PostStream"];var s=__webpack_require__.n(a),c=__webpack_require__(456);function n(){return t().forum.attribute("canBypassAds")}function d(){return t().forum.attribute("canViewAds")}const i=flarum.core.compat["forum/components/DiscussionPage"];var u=__webpack_require__.n(i);const _=flarum.core.compat["forum/components/DiscussionHero"];var p=__webpack_require__.n(_);const l=flarum.core.compat["forum/components/DiscussionListPane"];var b=__webpack_require__.n(l);const f=flarum.core.compat["common/components/LoadingIndicator"];var h=__webpack_require__.n(f);const v=flarum.core.compat["common/helpers/listItems"];var w=__webpack_require__.n(v);const y=flarum.core.compat["forum/components/IndexPage"];var g=__webpack_require__.n(y);t().initializers.add("mediaconstructor/ads",(function(){var e,a,i,_=JSON.parse(t().data["mediaconstructor-ads.enabled-ad-locations"]);_.includes("header")&&(e=t().data["mediaconstructor-ads.ad-code.header"],a=t().data["mediaconstructor-ads.ad-code.header.js"],i=m.trust(e),(0,o.override)(g().prototype,"hero",(function(e){return n()&&!d()&&console.log(t().forum.attribute),n()&&!d()?e():m("[",null,e(),m("div",{align:"center",class:"mediaconstructor-ad mediaconstructor-ad-header"},i))})),(0,o.extend)(g().prototype,["oncreate","onupdate"],(function(e){n()&&!d()||(r(),(0,c.Z)("header",a))}))),_.includes("discussion_header")&&function(){var e=t().data["mediaconstructor-ads.ad-code.discussion_header"],a=t().data["mediaconstructor-ads.ad-code.discussion_header.js"],i=m.trust(e);(0,o.override)(u().prototype,"view",(function(e){if(n()&&!d())return e();var o=this.discussion;return m("div",{className:"DiscussionPage"},m(b(),{state:t().discussions}),m("div",{className:"DiscussionPage-discussion"},o?[p().component({discussion:o}),m("div",{className:"container"},m("nav",{className:"DiscussionPage-nav"},m("ul",null,w()(this.sidebarItems().toArray()))),m("div",{className:"DiscussionPage-stream"},m("div",{class:"mediaconstructor-ad mediaconstructor-ad-discussion-header",align:"center"},i),s().component({discussion:o,stream:this.stream,onPositionChange:this.positionChanged.bind(this)})))]:m(h(),null)))})),(0,o.extend)(u().prototype,["oncreate","onupdate"],(function(e){n()&&!d()||(r(),(0,c.Z)("discussion page header",a))}))}(),_.includes("footer")&&setTimeout((function(){if(!n()||d()){var e=t().data["mediaconstructor-ads.ad-code.footer"],o=t().data["mediaconstructor-ads.ad-code.footer.js"],a=document.createElement("footer");a.className="mediaconstructor-ad mediaconstructor-ad-footer",a.setAttribute("align","center"),document.querySelector(".App-content").append(a),a.innerHTML=e;var s=history.pushState;history.pushState=function(){for(var t=arguments.length,n=new Array(t),d=0;d<t;d++)n[d]=arguments[d];s.apply(history,n),a.innerHTML=e,r(),(0,c.Z)("footer",o)},r()}}),0),_.includes("between_posts")&&function(){var e=t().data["mediaconstructor-ads.ad-code.between_posts"],a=t().data["mediaconstructor-ads.ad-code.between_posts.js"],i=m.trust(e);(0,o.override)(s().prototype,"view",(function(e){if(n()&&!d())return e();var o=e().children,r=o.reduce((function(e,r,a){var s=[].concat(e,[r]);return a+1<o.length&&a%(parseInt(t().data["mediaconstructor-ads.between-n-posts"])||15)==0&&s.push(m("aside",{key:"mediaconstructor-ad-"+a,class:"PostStream-item"},m("div",{class:"mediaconstructor-ad mediaconstructor-ad-between-posts"},i))),s}),[]);return"1"===t().data["mediaconstructor-ads.enable-ad-after-placeholder"]&&r.push(m("aside",{key:"mediaconstructor-ad-after-placeholder",class:"PostStream-item"},m("div",{class:"mediaconstructor-ad mediaconstructor-ad-between-posts mediaconstructor-ad-between-posts--after-placeholder"},i))),m("div",{className:"PostStream"},r)})),(0,o.extend)(s().prototype,["onupdate","oncreate"],(function(e){n()&&!d()||(r(),(0,c.Z)("between posts",a))}))}(),_.includes("sidebar")&&function(){var e=document.querySelector(":root"),a=t().data["mediaconstructor-ads.ad-code.sidebar"],s=t().data["mediaconstructor-ads.ad-code.sidebar.js"],i=m.trust(a);(0,o.extend)(g().prototype,"sidebarItems",(function(o){n()&&!d()||"tags"===t().current.get("routeName")||["desktop-hd","desktop","tablet"].includes(getComputedStyle(e).getPropertyValue("--flarum-screen"))&&o.add("mediaconstructor-ads",m("div",{class:"mediaconstructor-ad mediaconstructor-ad-sidebar"},i),-1e3)})),(0,o.extend)(g().prototype,["oncreate","onupdate"],(function(e){n()&&!d()||"tags"===t().current.get("routeName")||(r(),(0,c.Z)("sidebar",s))}))}(),_.includes("discussion_sidebar")&&function(){var e=document.querySelector(":root"),a=t().data["mediaconstructor-ads.ad-code.discussion_sidebar"],s=t().data["mediaconstructor-ads.ad-code.discussion_sidebar.js"],i=m.trust(a);e.style.setProperty("--mediaconstructor-ads--discussion-sidebar-position","36px"),(0,o.extend)(u().prototype,"sidebarItems",(function(t){n()&&!d()||["desktop-hd","desktop","tablet"].includes(getComputedStyle(e).getPropertyValue("--flarum-screen"))&&t.add("mediaconstructor-ads",m("div",{class:"mediaconstructor-ad mediaconstructor-ad-discussion-sidebar"},i),1e3)})),(0,o.extend)(u().prototype,["oncreate","onupdate"],(function(e){n()&&!d()||(r(),(0,c.Z)("discussion sidebar",s))}))}()}))})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=forum.js.map